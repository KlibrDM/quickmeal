"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5018],{5018:(O,f,s)=>{s.r(f),s.d(f,{CategoriesPageModule:()=>Q});var r=s(9972),c=s(4755),g=s(5030),d=s(2443),e=s(3020),_=s(2468),p=s(452),m=s(5955),C=s(8612);function x(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-segment",12),e.NdJ("ngModelChange",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedFilterCode=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.categoryChanged())}),e.TgZ(1,"ion-segment-button",13)(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-segment-button",13)(5,"ion-label"),e._uU(6),e.qZA()(),e.TgZ(7,"ion-segment-button",13)(8,"ion-label"),e._uU(9),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("ngModel",t.selectedFilterCode),e.xp6(1),e.Q6J("value",t.filters.categories.code),e.xp6(2),e.Oqu(t.filters.categories.label),e.xp6(1),e.Q6J("value",t.filters.area.code),e.xp6(2),e.Oqu(t.filters.area.label),e.xp6(1),e.Q6J("value",t.filters.ingredients.code),e.xp6(2),e.Oqu(t.filters.ingredients.label)}}function M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-buttons",14)(1,"ion-back-button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backButton())}),e.qZA()()}}function L(i,o){1&i&&(e.TgZ(0,"ion-title",16),e._uU(1,"Categories"),e.qZA())}function b(i,o){1&i&&(e.TgZ(0,"ion-title",16),e._uU(1,"Meals"),e.qZA())}function T(i,o){1&i&&e._UZ(0,"div",17)}function v(i,o){1&i&&e._UZ(0,"ion-progress-bar",18)}function P(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",20),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw(2);return e.KtG(h.seeMeals(l))}),e.TgZ(1,"ion-label"),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t)}}function Z(i,o){if(1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,P,3,1,"ion-item",19),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredCategoryList)}}function y(i,o){if(1&i&&(e.TgZ(0,"ion-thumbnail",24),e._UZ(1,"img",25),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.ekj("large-avatar",!(null!=n.settings&&n.settings.compactMode)),e.xp6(1),e.Q6J("src",t.image+"/preview",e.LSH)("appImgFallback",t.image)("alt",t.name)}}function J(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",22),e.NdJ("click",function(){const l=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.seeDetails(l))}),e.YNc(1,y,2,5,"ion-thumbnail",23),e.TgZ(2,"ion-label"),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!(null!=n.settings&&n.settings.limitedBandwidth)),e.xp6(2),e.Oqu(t.name)}}function w(i,o){if(1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,J,4,2,"ion-item",21),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredMealList)}}const u={categories:{name:"categories",label:"Categories",code:"c"},area:{name:"area",label:"Area",code:"a"},ingredients:{name:"ingredients",label:"Ingredients",code:"i"}},E=[{path:"",component:(()=>{class i{constructor(t,n,a){this.dataService=t,this.router=n,this.settingsService=a,this.filters=u,this.selectedFilterCode=u.categories.code,this.categoryList=[],this.filteredCategoryList=[],this.mealList=[],this.filteredMealList=[],this.filterText="",this.isLoading=!1,this.showCategoryList=!0,this.generalError=!1,this.internetError=!1}ngOnInit(){this.getSettings(),this.getData()}getSettings(){this.settingsService.settings.subscribe({next:t=>{this.settings=t}})}getData(){this.isLoading=!0,this.dataService.getCategories(this.selectedFilterCode).subscribe({next:t=>{this.categoryList=t,this.filteredCategoryList=t,this.isLoading=!1,this.internetError=!1,this.generalError=!1},error:t=>{this.categoryList=[],this.filteredCategoryList=[],this.isLoading=!1,0===t.status?this.internetError=!0:this.generalError=!0}})}categoryChanged(){this.getData()}backButton(){this.showCategoryList=!0,this.filterText="",this.filterChanged(),this.internetError=!1,this.generalError=!1}seeMeals(t){this.isLoading=!0,this.dataService.getMealsByCategory(this.selectedFilterCode,t).subscribe({next:n=>{this.mealList=n,this.filteredMealList=n,this.filterText="",this.filterChanged(),this.isLoading=!1,this.internetError=!1,this.generalError=!1,this.showCategoryList=!1},error:n=>{this.mealList=[],this.filteredMealList=[],this.showCategoryList=!1,this.isLoading=!1,0===n.status?this.internetError=!0:this.generalError=!0}})}seeDetails(t){const n=this.filteredMealList[t];n&&this.router.navigate(["tabs/meal/"+n.id])}filterChanged(){this.filteredCategoryList=this.categoryList.filter(t=>t.toLowerCase().includes(this.filterText.toLowerCase())),this.filteredMealList=this.mealList.filter(t=>t.name.toLowerCase().includes(this.filterText.toLowerCase()))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.D),e.Y36(d.F0),e.Y36(p.g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-categories"]],decls:16,vars:13,consts:[[1,"bg-white",3,"translucent"],[3,"ngModel","ngModelChange",4,"ngIf"],["slot","start",4,"ngIf"],[1,"use-background",3,"fullscreen"],["collapse","condense"],["size","large",4,"ngIf"],[1,"ion-padding","bg-white"],["label","Filter","label-placement","floating","fill","outline",1,"filter-input",3,"ngModel","ngModelChange"],["class","progress-bar-placeholder",4,"ngIf"],["type","indeterminate",4,"ngIf"],[4,"ngIf"],[3,"generalError","internetError"],[3,"ngModel","ngModelChange"],[3,"value"],["slot","start"],["default-href","#",3,"click"],["size","large"],[1,"progress-bar-placeholder"],["type","indeterminate"],["class","pointer white-hover",3,"click",4,"ngFor","ngForOf"],[1,"pointer","white-hover",3,"click"],["class","search-item pointer white-hover",3,"click",4,"ngFor","ngForOf"],[1,"search-item","pointer","white-hover",3,"click"],["slot","start","class","round",3,"large-avatar",4,"ngIf"],["slot","start",1,"round"],[3,"src","appImgFallback","alt"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar"),e.YNc(2,x,10,7,"ion-segment",1),e.YNc(3,M,2,0,"ion-buttons",2),e.qZA()(),e.TgZ(4,"ion-content",3)(5,"ion-header",4)(6,"ion-toolbar"),e.YNc(7,L,2,0,"ion-title",5),e.YNc(8,b,2,0,"ion-title",5),e.qZA()(),e.TgZ(9,"div",6)(10,"ion-input",7),e.NdJ("ngModelChange",function(l){return n.filterText=l})("ngModelChange",function(){return n.filterChanged()}),e.qZA(),e.YNc(11,T,1,0,"div",8),e.YNc(12,v,1,0,"ion-progress-bar",9),e.qZA(),e.YNc(13,Z,2,1,"ion-list",10),e.YNc(14,w,2,1,"ion-list",10),e._UZ(15,"app-error-card",11),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(2),e.Q6J("ngIf",n.showCategoryList),e.xp6(1),e.Q6J("ngIf",!n.showCategoryList),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(3),e.Q6J("ngIf",n.showCategoryList),e.xp6(1),e.Q6J("ngIf",!n.showCategoryList),e.xp6(2),e.Q6J("ngModel",n.filterText),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.filteredCategoryList.length&&n.showCategoryList),e.xp6(1),e.Q6J("ngIf",n.filteredMealList.length&&!n.showCategoryList),e.xp6(1),e.Q6J("generalError",n.generalError)("internetError",n.internetError))},dependencies:[r.oU,r.Sm,r.W2,r.Gu,r.pK,r.Ie,r.Q$,r.q_,r.X7,r.cJ,r.GO,r.Bs,r.wd,r.sr,r.QI,r.j9,r.cs,c.sg,c.O5,g.JJ,g.On,m.V,C.Z],styles:[".large-avatar[_ngcontent-%COMP%]{width:80px;height:80px}.round[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{border-radius:100%}.filter-input[_ngcontent-%COMP%]{margin-bottom:8px}.filter-input.has-focus.input-fill-outline.ion-valid.sc-ion-input-md-h[_ngcontent-%COMP%]{--border-color: var(--ion-color-primary);--highlight-color: var(--ion-color-primary)}.progress-bar-placeholder[_ngcontent-%COMP%]{height:3px}[_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{padding-top:0}"]}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(E),d.Bz]}),i})();var I=s(4466);let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[r.Pc,c.ez,g.u5,g.UX,F,I.m]}),i})()}}]);